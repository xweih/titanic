---
title: "Titanic Worksheet"
author: "Xiaowei Hu"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(digits = 3)    # report 3 significant digits
library(tidyverse)
library(titanic)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
titanic <- titanic_train %>%
  select(Survived, Pclass, Sex, Age, SibSp, Parch, Fare) %>%
  mutate(Survived = factor(Survived),
         Pclass = factor(Pclass),
         Sex = factor(Sex))
```

## QQ-plot of Age Distribution

You can also embed plots, for example:

```{r pressure, echo=TRUE}
params <- titanic %>%
  filter(!is.na(Age)) %>%
  summarize(mean = mean(Age), sd = sd(Age))

titanic |> filter(!is.na(Age)) |>
  ggplot(aes(sample = Age)) +
  geom_qq(dparams = params) +
  geom_qq_line(dparams = params)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

## Next, we show "Survival by Sex"

```{r, echo=TRUE}
titanic |> filter(Survived == 1) |>
  ggplot(aes(Survived, fill = Sex)) + geom_bar()

titanic |> group_by(Sex) |>
  ggplot(aes(Survived, fill = Sex)) + geom_bar()
```
